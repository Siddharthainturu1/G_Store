{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\brainskart-react-app\\\\client\\\\src\\\\modules\\\\orders\\\\components\\\\checkout\\\\Checkout.js\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { USER_FEATURE_KEY } from \"../../../../redux/users/users.reducers\";\nimport { ORDER_FEATURE_KEY } from \"../../../../redux/orders/orders.reducer\";\nimport Spinner from \"../../../layout/components/spinner/Spinner\";\nimport { Link, useHistory } from 'react-router-dom';\nimport StripeCheckout from \"react-stripe-checkout\";\nimport stripeImage from '../../../../assets/img/uibrains.png';\nimport { makeStripePayment } from \"../../../../redux/products/products.actions\";\n\nlet Checkout = () => {\n  var _user$address, _user$address2, _user$address3, _user$address4, _user$address5, _user$address6, _user$address7, _user$address8;\n\n  let dispatch = useDispatch();\n  let history = useHistory();\n  const PRODUCT_TAX = 5.0;\n  let userInfo = useSelector(state => {\n    return state[USER_FEATURE_KEY];\n  });\n  let {\n    loading,\n    user\n  } = userInfo;\n  let cartInfo = useSelector(state => {\n    return state[ORDER_FEATURE_KEY];\n  });\n  let {\n    cartItems\n  } = cartInfo;\n\n  let calcTotal = () => {\n    let result = 0;\n\n    if (cartItems.length > 0) {\n      for (let item of cartItems) {\n        result += item.price * item.qty;\n      }\n    }\n\n    return result;\n  };\n\n  let calcTax = () => {\n    return calcTotal() * PRODUCT_TAX / 100;\n  };\n\n  let calcGrandTotal = () => {\n    return calcTotal() + calcTax();\n  }; // Submit of Stripe Payment Form\n\n\n  let clickPayment = token => {\n    let items = cartItems.map(cartItem => {\n      return {\n        name: cartItem.name,\n        price: cartItem.price,\n        qty: cartItem.qty\n      };\n    });\n    let order = {\n      items: items,\n      tax: calcTax(),\n      total: calcTotal()\n    };\n    let product = {\n      price: Number(calcGrandTotal()) * 100,\n      name: 'Products from  BrainsKart'\n    };\n    let body = {\n      token,\n      product\n    };\n    dispatch(makeStripePayment(body, history, order));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"p-3 bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row animated flipInY\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-check-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }), \" CheckOut Your Items\"))))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 animated zoomInRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header bg-dark text-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 37\n    }\n  }, \"Billing Address\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/users/profile\",\n    className: \"btn btn-brains btn-sm float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }\n  }, \"Update Address\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 33\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 51\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 45\n    }\n  }, user !== null && user.address ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 61\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 65\n    }\n  }, \"Flat : \", (_user$address = user.address) === null || _user$address === void 0 ? void 0 : _user$address.flat), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 65\n    }\n  }, \"Street : \", (_user$address2 = user.address) === null || _user$address2 === void 0 ? void 0 : _user$address2.street), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 65\n    }\n  }, \"Landmark : \", (_user$address3 = user.address) === null || _user$address3 === void 0 ? void 0 : _user$address3.landmark), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 65\n    }\n  }, \"City : \", (_user$address4 = user.address) === null || _user$address4 === void 0 ? void 0 : _user$address4.city), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 65\n    }\n  }, \"State : \", (_user$address5 = user.address) === null || _user$address5 === void 0 ? void 0 : _user$address5.state), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 65\n    }\n  }, \"Country : \", (_user$address6 = user.address) === null || _user$address6 === void 0 ? void 0 : _user$address6.country), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 65\n    }\n  }, \"PinCode : \", (_user$address7 = user.address) === null || _user$address7 === void 0 ? void 0 : _user$address7.pin), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 65\n    }\n  }, \"Mobile : \", (_user$address8 = user.address) === null || _user$address8 === void 0 ? void 0 : _user$address8.mobile))) : null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header bg-dark text-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 37\n    }\n  }, \"Payment Option\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 36\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-control custom-radio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 40\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    id: \"customRadio1\",\n    name: \"customRadio\",\n    className: \"custom-control-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 44\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"custom-control-label \",\n    htmlFor: \"customRadio1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 48\n    }\n  }, \"Cash On Delivery\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-control custom-radio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 40\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    id: \"customRadio2\",\n    name: \"customRadio\",\n    className: \"custom-control-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 44\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"custom-control-label\",\n    htmlFor: \"customRadio2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 48\n    }\n  }, \"Credit Card Payment (Stripe)\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 animated zoomInLeft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header bg-dark text-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 37\n    }\n  }, \"Your Cart\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 37\n    }\n  }, cartItems.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 49\n    }\n  }, cartItems.map(cartItem => {\n    var _cartItem$price;\n\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: cartItem._id,\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 73\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: cartItem.image,\n      alt: \"\",\n      width: \"50\",\n      height: \"80\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 77\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 73\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 77\n      }\n    }, cartItem.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 77\n      }\n    }, \"Qty : \", cartItem.qty), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 77\n      }\n    }, \"Price : \\u20B9 \", (_cartItem$price = cartItem.price) === null || _cartItem$price === void 0 ? void 0 : _cartItem$price.toFixed(2)))));\n  })) : null), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 41\n    }\n  }, \"Total : \\u20B9 \", calcTotal().toFixed(2)), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 41\n    }\n  }, \"Tax : \\u20B9 \", calcTax().toFixed(2)), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item bg-brains\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 41\n    }\n  }, \"Grand Total : \\u20B9 \", calcGrandTotal().toFixed(2))), /*#__PURE__*/React.createElement(StripeCheckout, {\n    token: clickPayment,\n    stripeKey: process.env.REACT_APP_STRIPE_PUBLIC_KEY,\n    name: \"Stripe Payment\",\n    amount: calcGrandTotal() * 100,\n    description: \"Payments with Stripe\",\n    currency: \"inr\",\n    image: stripeImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary btn-sm btn-block mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 41\n    }\n  }, \"PAY \\u20B9 \", calcGrandTotal().toFixed(2))))))))));\n};\n\nexport default Checkout;","map":{"version":3,"sources":["C:/Users/HP/Desktop/brainskart-react-app/client/src/modules/orders/components/checkout/Checkout.js"],"names":["React","useDispatch","useSelector","USER_FEATURE_KEY","ORDER_FEATURE_KEY","Spinner","Link","useHistory","StripeCheckout","stripeImage","makeStripePayment","Checkout","dispatch","history","PRODUCT_TAX","userInfo","state","loading","user","cartInfo","cartItems","calcTotal","result","length","item","price","qty","calcTax","calcGrandTotal","clickPayment","token","items","map","cartItem","name","order","tax","total","product","Number","body","address","flat","street","landmark","city","country","pin","mobile","_id","image","toFixed","process","env","REACT_APP_STRIPE_PUBLIC_KEY"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {USER_FEATURE_KEY} from \"../../../../redux/users/users.reducers\";\r\nimport {ORDER_FEATURE_KEY} from \"../../../../redux/orders/orders.reducer\";\r\nimport Spinner from \"../../../layout/components/spinner/Spinner\";\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport StripeCheckout from \"react-stripe-checkout\";\r\nimport stripeImage from '../../../../assets/img/uibrains.png'\r\nimport {makeStripePayment} from \"../../../../redux/products/products.actions\";\r\n\r\nlet Checkout = () => {\r\n    let dispatch = useDispatch();\r\n    let history = useHistory();\r\n\r\n    const PRODUCT_TAX = 5.0;\r\n    let userInfo = useSelector((state) => {\r\n        return state[USER_FEATURE_KEY];\r\n    });\r\n\r\n    let {loading , user} = userInfo;\r\n\r\n    let cartInfo = useSelector((state) => {\r\n        return state[ORDER_FEATURE_KEY];\r\n    });\r\n\r\n    let {cartItems} = cartInfo;\r\n\r\n    let calcTotal = () => {\r\n        let result = 0;\r\n        if(cartItems.length > 0){\r\n            for(let item of cartItems){\r\n                result += item.price * item.qty;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n\r\n    let calcTax = () => {\r\n        return calcTotal() * PRODUCT_TAX / 100;\r\n    };\r\n\r\n    let calcGrandTotal = () => {\r\n        return calcTotal() + calcTax();\r\n    };\r\n\r\n    // Submit of Stripe Payment Form\r\n    let clickPayment = (token) => {\r\n        let items = cartItems.map(cartItem => {\r\n            return {\r\n                name : cartItem.name ,\r\n                price : cartItem.price,\r\n                qty : cartItem.qty\r\n            }\r\n        });\r\n\r\n        let order = {\r\n            items : items,\r\n            tax : calcTax(),\r\n            total : calcTotal()\r\n        };\r\n        let product = {\r\n            price : Number(calcGrandTotal()) * 100,\r\n            name : 'Products from  BrainsKart'\r\n        };\r\n        let body = {\r\n            token , product\r\n        };\r\n        dispatch(makeStripePayment(body , history, order));\r\n    };\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <section className=\"p-3 bg-brains\">\r\n                <div className=\"container \">\r\n                    <div className=\"row animated flipInY\">\r\n                        <div className=\"col\">\r\n                            <p className=\"h3\">\r\n                                <i className=\"fa fa-check-circle\"/> CheckOut Your Items</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section className=\"mt-3\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-8 animated zoomInRight\">\r\n                            <div className=\"card\">\r\n                                <div className=\"card-header bg-dark text-brains\">\r\n                                    <span className=\"h4\">Billing Address</span>\r\n                                    <Link to='/users/profile' className=\"btn btn-brains btn-sm float-right\">Update Address</Link>\r\n                                </div>\r\n                                <div className=\"card-body\">\r\n                                    {\r\n                                        loading ? <Spinner/>:\r\n                                            <React.Fragment>\r\n                                                {\r\n                                                    user !== null && user.address ?\r\n                                                        <React.Fragment>\r\n                                                            <ul className=\"list-group\">\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    Flat : {user.address?.flat}\r\n                                                                </li>\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    Street : {user.address?.street}\r\n                                                                </li>\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    Landmark : {user.address?.landmark}\r\n                                                                </li>\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    City : {user.address?.city}\r\n                                                                </li>\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    State : {user.address?.state}\r\n                                                                </li>\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    Country : {user.address?.country}\r\n                                                                </li>\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    PinCode : {user.address?.pin}\r\n                                                                </li>\r\n                                                                <li className=\"list-group-item bg-brains\">\r\n                                                                    Mobile : {user.address?.mobile}\r\n                                                                </li>\r\n                                                            </ul>\r\n                                                        </React.Fragment> : null\r\n                                                }\r\n                                            </React.Fragment>\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card mt-3\">\r\n                                <div className=\"card-header bg-dark text-brains\">\r\n                                    <p className=\"h4\">Payment Option</p>\r\n                                </div>\r\n                                <div className=\"card-body bg-light\">\r\n                                   <form>\r\n                                       <div className=\"custom-control custom-radio\">\r\n                                           <input type=\"radio\" id=\"customRadio1\" name=\"customRadio\"\r\n                                                  className=\"custom-control-input\"/>\r\n                                               <label className=\"custom-control-label \" htmlFor=\"customRadio1\">Cash On Delivery</label>\r\n                                       </div>\r\n                                       <div className=\"custom-control custom-radio\">\r\n                                           <input type=\"radio\" id=\"customRadio2\" name=\"customRadio\"\r\n                                                  className=\"custom-control-input\"/>\r\n                                               <label className=\"custom-control-label\" htmlFor=\"customRadio2\">Credit Card Payment (Stripe)</label>\r\n                                       </div>\r\n                                   </form>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-4 animated zoomInLeft\">\r\n                            <div className=\"card\">\r\n                                <div className=\"card-header bg-dark text-brains\">\r\n                                    <p className=\"h4\">Your Cart</p>\r\n                                </div>\r\n                                <div className=\"card-body bg-brains\">\r\n                                    <ul className=\"list-group\">\r\n                                        {\r\n                                            cartItems.length > 0 ?\r\n                                                <React.Fragment>\r\n                                                    {\r\n                                                        cartItems.map(cartItem => {\r\n                                                            return (\r\n                                                                <li key={cartItem._id} className=\"list-group-item\">\r\n                                                                    <div className=\"row text-center\">\r\n                                                                        <div className=\"col-md-2\">\r\n                                                                            <img src={cartItem.image} alt=\"\" width=\"50\" height=\"80\"/>\r\n                                                                        </div>\r\n                                                                        <div className=\"col-md-8\">\r\n                                                                            <p className=\"h6\">{cartItem.name}</p>\r\n                                                                            <p className=\"h6\">Qty : {cartItem.qty}</p>\r\n                                                                            <p className=\"h6\">Price : &#8377; {cartItem.price?.toFixed(2)}</p>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </li>\r\n                                                            )\r\n                                                        })\r\n                                                    }\r\n                                                </React.Fragment> : null\r\n                                        }\r\n                                    </ul>\r\n                                    <ul className=\"list-group mt-2\">\r\n                                        <li className=\"list-group-item bg-brains\">\r\n                                            Total : &#8377; {calcTotal().toFixed(2)}\r\n                                        </li>\r\n                                        <li className=\"list-group-item bg-brains\">\r\n                                            Tax : &#8377; {calcTax().toFixed(2)}\r\n                                        </li>\r\n                                        <li className=\"list-group-item bg-brains\">\r\n                                            Grand Total : &#8377; {calcGrandTotal().toFixed(2)}\r\n                                        </li>\r\n                                    </ul>\r\n                                    {/* STRIPE PAYMENT CHECKOUT FORM  */}\r\n                                    <StripeCheckout token={clickPayment}\r\n                                                    stripeKey={process.env.REACT_APP_STRIPE_PUBLIC_KEY}\r\n                                                    name=\"Stripe Payment\"\r\n                                                    amount={calcGrandTotal() * 100}\r\n                                                    description=\"Payments with Stripe\"\r\n                                                    currency=\"inr\"\r\n                                                    image={stripeImage}>\r\n                                        <button className=\"btn btn-secondary btn-sm btn-block mt-3\">PAY &#8377; {calcGrandTotal().toFixed(2)}</button>\r\n                                    </StripeCheckout>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </React.Fragment>\r\n    );\r\n};\r\nexport default Checkout;\r\n"]},"metadata":{},"sourceType":"module"}